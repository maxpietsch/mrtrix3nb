---

title: MRtrix3notebook


keywords: fastai
sidebar: home_sidebar

summary: "Develop MRtrix3-based pipelines using Jupyter notebooks"
description: "Develop MRtrix3-based pipelines using Jupyter notebooks"
nb_path: "00_core.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_core.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="exists" class="doc_header"><code>exists</code><a href="https://github.com/maxpietsch/mrtrix3nb/tree/master/mrtrix3nb/core.py#L9" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>exists</code>(<strong><code>s</code></strong>, <strong><code>minsize_bytes</code></strong>=<em><code>100</code></em>, <strong><code>isdir</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Comp" class="doc_header"><code>class</code> <code>Comp</code><a href="https://github.com/maxpietsch/mrtrix3nb/tree/master/mrtrix3nb/core.py#L42" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Comp</code>(<strong><code>dry_run</code></strong>=<em><code>False</code></em>, <strong><code>env</code></strong>=<em><code>{'FSLREMOTECALL': '', 'SHELL': '/bin/zsh', '_': '/usr/bin/make', 'FSLDIR': '/usr/local/fsl', 'CONDA_PREFIX_1': '/Users/mp/anaconda3', '__CFBundleIdentifier': 'com.googlecode.iterm2', 'ANTSPATH': '/Users/mp/src/ANTs/install/bin/', 'FSLOUTPUTTYPE': 'NIFTI_GZ', 'PATH': '/Users/mp/src/ANTs/install/bin:/Users/mp/mrtrix3_mrreg_lite/bin:/usr/local/opt/qt/bin:/Users/mp/anaconda3/envs/notebook/bin:/Users/mp/anaconda3/condabin:/usr/local/fsl/bin:/Users/mp/Applications/mrtrix3/mrtrix3/bin:/Users/mp/mrtrix3/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/opt/X11/bin:/Library/Apple/usr/bin', 'LSCOLORS': 'Gxfxcxdxbxegedabagacad', 'nan': 'k1465906@nanlnx1.iop.kcl.ac.uk', 'FSLMACHINELIST': '', 'SSH_AUTH_SOCK': '/private/tmp/com.apple.launchd.npv1I3H6fJ/Listeners', 'DISPLAY': '/private/tmp/com.apple.launchd.dINyvAdXgU/org.macosforge.xquartz:0', 'CONDA_EXE': '/Users/mp/anaconda3/bin/conda', 'PWD': '/Users/mp/Dropbox/mrtrix3nb', 'PKG_CONFIG_PATH': '/usr/local/opt/qt/lib/pkgconfig', 'FSLMULTIFILEQUIT': 'TRUE', 'HOME': '/Users/mp', 'LOGNAME': 'mp', 'CONDA_PROMPT_MODIFIER': '(notebook) ', 'ZSH': '/Users/mp/.oh-my-zsh', 'CONDA_DEFAULT_ENV': 'notebook', 'XPC_FLAGS': '0x0', 'COLORTERM': 'truecolor', 'FSLGECUDAQ': 'cuda.q', 'wrk': 'mp14@perinatal117-pc', 'SHLVL': '1', 'GIT_PAGER': 'cat', 'USER': 'mp', 'TERM_SESSION_ID': 'w0t1p0:1E43CACE-09A9-44C9-8DF8-4BD23B36C92C', 'MPLBACKEND': 'module://ipykernel.pylab.backend_inline', 'LESS': '-F -X -R', 'JPY_PARENT_PID': '41037', 'CONDA_SHLVL': '2', 'OLDPWD': '/Users/mp/Dropbox/mrtrix3nb', 'TERM_PROGRAM': 'iTerm.app', 'TMPDIR': '/var/folders/0_/x_fhlh1n76bd5hnk6rcmyzg40000gn/T/', 'LC_TERMINAL': 'iTerm2', 'FSLLOCKDIR': '', 'MAKEFLAGS': '', 'MFLAGS': '', 'TERM_PROGRAM_VERSION': '3.4.3', 'XPC_SERVICE_NAME': '0', 'LC_TERMINAL_VERSION': '3.4.3', 'ITERM_SESSION_ID': 'w0t1p0:1E43CACE-09A9-44C9-8DF8-4BD23B36C92C', 'COLORFGBG': '15;0', '__CF_USER_TEXT_ENCODING': '0x1F5:0:2', 'COMMAND_MODE': 'unix2003', 'FSLTCLSH': '/usr/local/fsl/bin/fsltclsh', 'ITERM_PROFILE': 'Default', 'PAGER': 'cat', 'CONDA_PYTHON_EXE': '/Users/mp/anaconda3/bin/python', '_CE_M': '', 'FSLWISH': '/usr/local/fsl/bin/fslwish', 'CLICOLOR': '1', 'CONDA_PREFIX': '/Users/mp/anaconda3/envs/notebook', 'TERM': 'xterm-color', '_CE_CONDA': '', 'LANG': 'en_GB.UTF-8', 'MAKELEVEL': '1'}</code></em>, <strong><code>loglevel</code></strong>=<em><code>'INFO'</code></em>, <strong><code>progress</code></strong>=<em><code>True</code></em>, <strong><code>nice</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="n">Comp</span><span class="p">(</span><span class="n">dry_run</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">run</span><span class="p">:</span>
    <span class="n">run</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">)</span>
    <span class="n">run</span> <span class="o">+=</span> <span class="s1">&#39;mrinfo --version&#39;</span>
    <span class="n">run</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;dcminfo&#39;</span><span class="p">,</span> <span class="s1">&#39;--version&#39;</span><span class="p">]</span>
    <span class="n">run</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;done&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>INFO:__main__:start
INFO:__main__:done
INFO:__main__:dry_run: mrinfo --version
INFO:__main__:dry_run: dcminfo --version
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">Comp</span><span class="p">(</span><span class="n">loglevel</span><span class="o">=</span><span class="s1">&#39;INFO&#39;</span><span class="p">,</span> <span class="n">nice</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="p">{</span><span class="o">**</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">,</span> <span class="s1">&#39;MRTRIX_NTHREADS&#39;</span><span class="p">:</span><span class="s1">&#39;4&#39;</span><span class="p">})</span>
<span class="k">with</span> <span class="n">c</span><span class="o">.</span><span class="n">tmp_dir</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmp</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">tmp</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">exists</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">isdir</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">tmp</span>
    <span class="n">c</span> <span class="o">+=</span> <span class="s1">&#39;dcminfo --version&#39;</span>
    <span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="n">exists</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">isdir</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">tmp</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>/tmp/tmp9u2ekdqt

</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">def</span> <span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">owner</span><span class="p">):</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;returned from descriptor object&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
    <span class="k">def</span> <span class="fm">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;set in descriptor object&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">def</span> <span class="fm">__delete__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;deleted in descriptor object&quot;</span><span class="p">)</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">bar</span> <span class="o">=</span> <span class="n">Bar</span><span class="p">()</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
<span class="n">f</span><span class="o">.</span><span class="n">bar</span> <span class="o">=</span> <span class="mi">10</span>
<span class="nb">print</span><span class="p">(</span> <span class="n">f</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>set in descriptor object
returned from descriptor object
10
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">Comp</span><span class="p">(</span><span class="n">loglevel</span><span class="o">=</span><span class="s1">&#39;INFO&#39;</span><span class="p">)</span>
<span class="n">c</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;mrinfo&#39;</span><span class="p">,</span> <span class="s1">&#39;-version&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>computer 1 jobs: deque([&#39;mrinfo -version&#39;])
computer 0 jobs: deque([])
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

